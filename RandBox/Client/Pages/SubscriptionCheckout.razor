@page "/pricing/checkout/{id:int}"
@inject IJSRuntime JSRuntime
@* @attribute [Authorize] *@

<section class="row d-flex justify-content-center align-items-center">
    <form class="row d-flex justify-content-center w-50" id="payment-form">
        <div id="link-authentication-element">
            <!--Stripe.js injects the Link Element-->
        </div>
        <div id="address-element">
            <!--Stripe.js injects the Address Element-->
        </div>
        <div id="payment-element">
            <!--Stripe.js injects the Payment Element-->
        </div>
        <button class="btn btn-pay" id="submit">
            <div class="spinner hidden" id="spinner"></div>
            <span id="button-text">Checkout</span>
        </button>
        <div id="payment-message" class="hidden"></div>
    </form>
</section>

@code {
    [Parameter]
    public int id { get; set; }

    protected override async Task OnAfterRenderAsync(bool firstRender)
    {
        await JSRuntime.InvokeVoidAsync("SubscriptionCheckout.initialise", id);
    }
}
